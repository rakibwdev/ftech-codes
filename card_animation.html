<script>
    document.addEventListener('DOMContentLoaded', () => {
        const section = document.querySelector('.scroll-flip-section');
        if (!section) return;

        const endPoint = { x: 0, y: 0, r: 0, scale: 1 };

        const cards = [
            {
                el: document.querySelector('.solution-card-1'),
                start: { x: 788.3, y: -633.3, scale: 0.4034 },
                end: endPoint
            },
            {
                el: document.querySelector('.solution-card-2'),
                start: { x: 355.3, y: -617.3, r: 12, scale: 0.4753 },
                end: endPoint
            },
            {
                el: document.querySelector('.solution-card-3'),
                start: { x: -70.7, y: -605.3, r: 24, scale: 0.4471 },
                end: endPoint
            }
        ];

        const lerp = (a, b, t) => a + (b - a) * t;

        const onScroll = () => {

            const rect = section.getBoundingClientRect();
            const vh = window.innerHeight;

            const startOffset = vh * 0.9;  
            const endOffset = vh * 0.2;   

            let progress = (startOffset - rect.top) / (startOffset - endOffset);
            progress = Math.min(Math.max(progress, 0), 1);


            cards.forEach(card => {
                if (!card.el) return;

                const x = lerp(card.start.x, card.end.x, progress);
                const y = lerp(card.start.y, card.end.y, progress);
                const scale = lerp(card.start.scale, card.end.scale, progress);
                const rotate = card.start.r !== undefined
                    ? lerp(card.start.r, card.end.r, progress)
                    : 0;

                card.el.style.transform =
                    `translate3d(${x}px, ${y}px, 0) rotate(${rotate}deg) scale(${scale})`;
            });
        };

        window.addEventListener('scroll', onScroll);
        onScroll();

    });
</script>
