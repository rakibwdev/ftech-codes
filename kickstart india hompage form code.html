<html>
<div class="v2_from_wrapper" active_step="1">
    <div class="from_container">
        <div class="from_step from_tep_1">

            <div class="step_title" style="text-align: center;">
                <h5 style="color: #667085; font-size: 16px; font-weight: 400;">Turbocharge your <b>Tech Career</b></h5>
                <h2>Get Started with our <span style="color:#429AE2">FREE Webinar</span></h2>

            </div>
            <label class="fr_fild v2_full_name" err_status="false">
                <h6 style="margin-bottom:5px">Full Name</h6>
                <span class="title" id="name"></span>
                <input type="text" placeholder="Enter name
                 " class="fr_name_fl" id="name-input">
                <span class="err_fild" id="name-error"><b>ⓘ</b> Enter first name</span>
            </label>

            <label class="fr_fild v2_email" err_status="false">
                <h6 style="margin-bottom:5px">Email ID</h6>
                <span class="title" id="email"></span>
                <input type="email" placeholder="Enter email ID" class="fr_email_fl" id="email-input">
                <span class="err_fild" id="email-error"><b>ⓘ</b> Please enter a valid email</span>
            </label>

            <label class="fr_fild v2_phone_number " err_status="false">
                <h6 style="margin-bottom:5px">Phone no.</h6>
                <span class="title" id="phone"></span>
                <input type="tel" placeholder="Enter phone number
                " class="fr_phone_fl" id="phone-input">
                <span class="err_fild" id="phone-error"><b>ⓘ</b> Please enter valid number</span>
                <p class="message" style="display: none"><b>ⓘ</b> Used to send reminder for webinar</p>
            </label>

            <label class="fr_fild v2_topic_of_int_fild" err_status="false">
                <span class="title" id="career-goal">Pick your next career move</span>

                <div class="topic_select">
                    <label>
                        <input type="radio" name="topic_select" class="topic_select" value="Uplevel in my role"
                            webinartype="REGULAR" id="topic_select_option_interview_prep" checked>
                        <span>Land a Top-Tech Role</span>
                    </label>

                    <label>
                        <input type="radio" name="topic_select" class="topic_select" value="Switch to an AI career"
                            webinartype="SWITCH_UP" id="topic_select_option_switch_up">
                        <span>Transition to AI/ML</span>
                    </label>

                    <label>
                        <input type="radio" name="topic_select" class="topic_select" value="Use AI in current job"
                            webinartype="Agentic_AI" id="topic_select_option_agentic_ai">
                        <span>Learn Agentic AI</span>
                    </label>
                </div>
                <span class="err_fild"><b>ⓘ</b> Pick your next career move</span>
            </label>

            <div class="fr_acceptance">
                <input checked class="fr_in_fild" id="Whatsapp-User-Consent" type="checkbox" class="whatsapp-consent"
                    id="whatsapp-consent-checkbox">
                <label for="Whatsapp-User-Consent">I wish to receive further updates and confirmation via
                    Whatsapp</label>
            </div>


            <p>By sharing your contact details, you agree to our <a href="/privacy-policy" target="_blank">privacy
                    policy</a>.</p>

            <div class="btn_container">
                <button class="step_btn step_btn_1" data-click-id="step-btn-1">Proceed</button>
            </div>
        </div>

        <div class="from_step from_tep_2">
            <div class="title">Choose a slot</div>
            <p class="time_zone">Time Zone: Asia/Dhaka</p>
            <div class="slots_container">
                <div class="slot_sl_con">
                    <div class="slot_fild">
                        <label class="slot">
                            <input type="radio" name="v2_slot" class="v2_slot_radio" checked>
                            <div class="time_slot_wrapper">
                                <div class=" ">SAT</div>
                                <div class="v2_date">23</div>
                                <hr>
                                <div class="v2_time">06:00 AM</div>
                            </div>
                            <div class="v2_timer_alart" alart_type="danger">
                                Almost full
                            </div>
                        </label>

                        <label class="slot">
                            <input type="radio" name="v2_slot" class="v2_slot_radio">
                            <div class="time_slot_wrapper">
                                <div class="v2_day">SAT</div>
                                <div class="v2_date">23</div>
                                <hr>
                                <div class="v2_time">06:00 AM</div>
                            </div>
                        </label>

                        <label class="slot">
                            <input type="radio" name="v2_slot" class="v2_slot_radio">
                            <div class="time_slot_wrapper">
                                <div class="v2_day">SAT</div>
                                <div class="v2_date">23</div>
                                <hr>
                                <div class="v2_time">06:00 AM</div>
                            </div>
                            <div class="v2_timer_alart" alart_type="warning">
                                Filling fast
                            </div>
                        </label>

                        <label class="slot">
                            <input type="radio" name="v2_slot" class="v2_slot_radio">
                            <div class="time_slot_wrapper">
                                <div class="v2_day">SAT</div>
                                <div class="v2_date">23</div>
                                <hr>
                                <div class="v2_time">06:00 AM</div>
                            </div>
                        </label>

                        <label class="slot">
                            <input type="radio" name="v2_slot" class="v2_slot_radio">
                            <div class="time_slot_wrapper">
                                <div class="v2_day">SAT</div>
                                <div class="v2_date">23</div>
                                <hr>
                                <div class="v2_time">06:00 AM</div>
                            </div>
                        </label>

                        <label class="slot">
                            <input type="radio" name="v2_slot" class="v2_slot_radio">
                            <div class="time_slot_wrapper">
                                <div class="v2_day">SAT</div>
                                <div class="v2_date">23</div>
                                <hr>
                                <div class="v2_time">06:00 AM</div>
                            </div>
                        </label>

                        <label class="slot">
                            <input type="radio" name="v2_slot" class="v2_slot_radio">
                            <div class="time_slot_wrapper">
                                <div class="v2_day">SAT</div>
                                <div class="v2_date">23</div>
                                <hr>
                                <div class="v2_time">06:00 AM</div>
                            </div>
                        </label>

                        <label class="slot">
                            <input type="radio" name="v2_slot" class="v2_slot_radio">
                            <div class="time_slot_wrapper">
                                <div class="v2_day">SAT</div>
                                <div class="v2_date">23</div>
                                <hr>
                                <div class="v2_time">06:00 AM</div>
                            </div>
                        </label>

                        <label class="slot">
                            <input type="radio" name="v2_slot" class="v2_slot_radio">
                            <div class="time_slot_wrapper">
                                <div class="v2_day">SAT</div>
                                <div class="v2_date">23</div>
                                <hr>
                                <div class="v2_time">06:00 AM</div>
                            </div>
                        </label>
                    </div>
                </div>
            </div>
            <div class="btn_container">
                <button class="step_btn step_back step_back_2" data-click-id="v-two-form-second-back">Back</button>
                <button class="step_btn step_btn_2" data-click-id="step-btn-2">Proceed</button>
            </div>
        </div>

        <div class="from_step from_tep_3">
            <div class="step_title">
                <h2>Share your profile details</h2>
                <p class="for_step_3">Give us more details about yourself so that our <b>FAANG Experts</b> can suggest
                    the best options for you!</p>
            </div>
            <div class="tr_filds">


                <label class="fr_fild v2_exp_fild" err_status="false">
                    <span class="title">Years of experience</span>
                    <select class="gql_exp_select">
                        <option value="" data-cr="0.35">Select option</option>
                        <option value="0-2" data-cr="0.58">0-2</option>
                        <option value="3-4" data-cr="1.02">3-4</option>
                        <option value="5-8" data-cr="1.02">5-8</option>
                        <option value="9-15" data-cr="1.59">9-15</option>
                        <option value="16-20" data-cr="1.40">16-20</option>
                        <option value="20+" data-cr="1.19">20+</option>
                    </select>
                    <span class="err_fild"><b>ⓘ</b> Select experience</span>
                </label>

                <label class="fr_fild v2_dom_fild" err_status="false">
                    <span class="title">Domain/Role</span>
                    <select class="gql_domain_select">
                        <option value="" data-cr="0.37">Select option</option>
                        <option value="Back-end" data-cr="1.87">Back-end</option>
                        <option value="Cloud Engineer" data-cr="0.95">Cloud Engineer</option>
                        <option value="Cyber Security" data-cr="0.47">Cyber Security</option>
                        <option value="Data Engineer" data-cr="1.18">Data Engineer</option>
                        <option value="Data Science" data-cr="0.68">Data Science</option>
                        <option value="Front-end" data-cr="0.82">Front-end</option>
                        <option value="Full Stack" data-cr="1.40">Full Stack</option>
                        <option value="Machine Learning / AI" data-cr="1.08">Machine Learning / AI</option>
                        <option value="Engineering Manager - any domain" data-cr="1.65">Engineering Manager - any domain
                        </option>
                        <option value="Tech Product Manager" data-cr="0.57">Tech Product Manager</option>
                        <option value="Product Manager (Non Tech)" data-cr="0">Product Manager (Non Tech)</option>
                        <option value="Technical Program Manager" data-cr="1.11">Technical Program Manager</option>
                        <option value="Test Engineer / SDET / QE" data-cr="1.22">Test Engineer / SDET / QE</option>
                        <option value="Android Developer" data-cr="0.89">Android Developer</option>
                        <option value="iOS Developer" data-cr="1.16">iOS Developer</option>
                        <option value="Site Reliability Engineer" data-cr="1.20">Site Reliability Engineer</option>
                        <option value="Embedded Software Engineer" data-cr="0.73">Embedded Software Engineer</option>
                        <option value="Other Software Engineers" data-cr="0.74">Other Software Engineers</option>
                        <option value="Data Analyst / Business Analyst" data-cr="0">Data Analyst / Business Analyst
                        </option>
                        <option value="Core Engineering" data-cr="">Core Engineering/STEM degree</option>
                        <option value="Salesforce developer" data-cr="">Salesforce developer</option>
                        <option value="DevOps Engineer" data-cr="">DevOps Engineer</option>
                        <option value="None of the above" data-cr="0">None of the above</option>
                    </select>
                    <span class="err_fild"><b>ⓘ</b> Select domain</span>
                </label>

                <label class="fr_check_box">
                    <input type="checkbox" class="v2-checkbox-is-laidoff">
                    <span>I have been laid off recently</span>
                </label>

                <label class="fr_check_box">
                    <input type="checkbox" class="v2-checkbox-is-student">
                    <span>I’m currently a student</span>
                </label>

            </div>
            <div class="btn_container">
                <button class="step_btn step_back step_back_3" data-click-id="v-two-form-third-back">Back</button>
                <button class="step_btn step_btn_3" data-click-id="step-btn-3">Finish</button>
            </div>
        </div>
    </div>

    <div class="step_counter">
        <span></span>
        <span></span>
        <span></span>
    </div>
</div>

</html>



<!--
Title: India Homepage
Type: elementor_snippet
Author: Liaquat
Last edited: 2026-01-19 17:45:43
--- The comment is visible only for administrators ---
-->
<!-- home-v1 -->
<script>
    document.addEventListener("webNearLoaded", function () {
        const mainConatiner = document.querySelector(".v2_from_wrapper");
        const slideFlid = mainConatiner.querySelector(".slot_fild");
        slideFlid.innerHTML = "";
        webinarSlots.forEach(function (slot, index) {
            let createWebniarSlot = document.createElement("label");
            createWebniarSlot.classList.add("slot");

            let slotInner = `
                  <input type="radio" 
                  name="v2_slot" 
                  class="v2_slot_radio"
                  value="${slot.start_time}"
                  data-endtime="${slot.end_time}" 
                  data-invitee_starttime="${slot.invitee_start_time}" 
                  data-invitee_endtime="${slot.invitee_end_time}" 
                  data-name="${slot.start_time}" 
                  data-webinar_lead_type="${slot.webinar_lead_type}" 
                  ${index === 0 ? "checked" : ""}
                  slot-index="${index}" >
                  <div class="time_slot_wrapper">
                      <div class="v2_day">${slot.weekday
                    .slice(0, 3)
                    .toUpperCase()}</div>
                      <div class="v2_date">${slot.day}</div>
                      <hr>
                      <div class="v2_time">${slot.hour}:${slot.minute} ${slot.am_or_pm
                }</div>
                  </div>
  
          `;

            if (index === 0) {
                slotInner += `
                  <div class="v2_timer_alart" alart_type="warning">
                      Filling fast
                  </div>
              `;
            } else if (slot.weekday === "Saturday") {
                slotInner += `
                  <div class="v2_timer_alart" alart_type="danger">
                      Almost full
                  </div>
              `;
            }

            createWebniarSlot.innerHTML = slotInner;
            slideFlid.appendChild(createWebniarSlot);
        });
    });
</script>

<!-- From send -->
<script>
    window.addEventListener("DOMContentLoaded", function () {
        const getThePopupFrom2 = document.querySelector(".v2_from_wrapper");
        getThePopupFrom2.querySelector(
            ".time_zone"
        ).innerHTML = `Time Zone: ${v_timezone}`;

        const webNearTopicOfInterest = getThePopupFrom2.querySelectorAll(
            '.topic_select[type="radio"]'
        );
        // Weighted distribution for auto-selecting the default topic (40/40/20 split).
        const TOPIC_WEIGHT_CONFIG = [
            { type: "REGULAR", weight: 0.4 },
            { type: "SWITCH_UP", weight: 0.4 },
            { type: "Agentic_AI", weight: 0.2 },
        ];
        const webNearFullName2 = getThePopupFrom2.querySelector("input.fr_name_fl");
        const webNearEmailAddress2 = getThePopupFrom2.querySelector(".fr_email_fl");
        const webNearPhoneNumber2 = getThePopupFrom2.querySelector(".fr_phone_fl");
        const webNearAccepTance = getThePopupFrom2.querySelector(
            ".fr_acceptance input#Whatsapp-User-Consent"
        );

        const webNearSlots2 = getThePopupFrom2.querySelector(
            ".slot_sl_con .slot_fild"
        );

        const webNearPhoneNumberWri2 = window.intlTelInput(webNearPhoneNumber2, {
            initialCountry: "auto",
            geoIpLookup: function (callback) {
                fetch("https://ipinfo.io", { headers: { Accept: "application/json" } })
                    .then((resp) => resp.json())
                    .then((resp) => {
                        callback(resp.country);
                    })
                    .catch((error) => {
                        console.error("Error in geoIpLookup", error);
                        callback("in");
                    });
            },
            utilsScript:
                "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
        });

        const getTopicErrMsg2 = getThePopupFrom2.querySelector(
            ".v2_topic_of_int_fild"
        );
        const getFnErrMsg2 = getThePopupFrom2.querySelector(".v2_full_name");
        const getEmErrMsg2 = getThePopupFrom2.querySelector(".v2_email");
        const getPhErrMsg2 = getThePopupFrom2.querySelector(".v2_phone_number");

        // name container
        const webNearInfo2 = {
            topicOfinterest: "",
            firstName: "",
            lastName: "",
            whatsAppUserConsent: "Yes",
            fPhoneNumber: "",
            phone_code: "",
            utm_source: "",
            utm_medium: "",
            utm_campaign: "",
            utm_adset: "",
            utm_content: "",
            utm_term: "",
            page_url: page_url,
            site_url: window.location.hostname,
            user_id: "",
            gclid: "",
            salesforce_uuid: "",
            msclkid: "",
            fbclid: "",
            fbcId: null,
            fbpId: null,
            userAgent: "",
            li_fat_id: "",
            user_timezone: "",
            l_page_url: "",
            cta_page_url: "",
            webinar_type: "",
            eventname: "",
            wr__referrer: "",
            wr__device: "",
            webinar_lead_type: "",
            bye_calendly_type: "",
            is_exit_intent_popup: "",
            v_country: "",
            wr__region: "",
            wr__city: "",
            irclickid: "",

            eventStartTime: "",
            eventEndTime: "",
            inviteStartTime: "",
            inviteEndTime: "",
        };

        //check regex
        let name_regex2 = new RegExp("^[a-zA-Z ]+$");
        let email_regex2 = EMAIL_REGEX;
        let phone_regex2 =
            /^(\+\d{1,2}\s?)?1?\-?\.?\s?\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4}$/;

        // getlocation json
        //     (async function () {
        //       let response = await fetch("https://get.geojs.io/v1/ip/geo.json");
        //       let data = await response.json();
        //       webNearInfo2.v_country = data.country;
        //       webNearInfo2.wr__region = data.region;
        //       webNearInfo2.wr__city = data.city;
        //     })();
        (async function () {
            const data = await fetchIPInfo();
            if (data) {
                webNearInfo.v_country = data.countryName;
                webNearInfo.wr__region = data.region;
                webNearInfo.wr__city = data.city;
            }
        })();

        function getCookieValue(cookieName) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${cookieName}=`);
            if (parts.length === 2) return parts.pop().split(";").shift();
        }

        function setHiddenFields2() {
            //  let params = read_cookie("v_latest");
            function getParams(t) {
                var t = t ? t.split("?")[1] : window.location.search.slice(1),
                    r = {};
                if (t)
                    for (
                        var s = (t = t.split("#")[0]).split("&"), e = 0;
                        e < s.length;
                        e++
                    ) {
                        var a,
                            n = s[e].split("="),
                            i = n[0],
                            o = void 0 === n[1] ? void 0 : n[1];
                        (i = i.toLowerCase()).match(/\[(\d+)?\]$/)
                            ? (r[(a = i.replace(/\[(\d+)?\]/, ""))] || (r[a] = []),
                                i.match(/\[\d+\]$/)
                                    ? ((n = /\[(\d+)\]/.exec(i)[1]), (r[a][n] = o))
                                    : r[a].push(o))
                            : r[i]
                                ? ("string" == typeof r[i] && (r[i] = [r[i]]), r[i].push(o))
                                : (r[i] = o);
                    }
                return r;
            }
            let params = [];
            try {
                params = read_cookie("v_latest") || getParams();
                bake_cookie("v_latest", params);
            } catch (error) {
                console.error("Error while reading cookie", error);
            }
            const fbcFromCookies = getCookieValue("_fbc");
            const fbp = getCookieValue("_fbp");
            const userAgent = navigator?.userAgent;
            const fbclid = decodeURIComponent(params["fbclid"] || "");
            let fbc = fbcFromCookies;
            if (!fbcFromCookies && fbclid) {
                // Generate fbc from fbclid
                const domainParts = window.location.hostname.split(".");
                const subdomainIndex = domainParts.length - 1;
                const creationTime = Date.now();
                fbc = `fb.${subdomainIndex}.${creationTime}.${fbclid}`;
            }
            let whatsAppUserConsentValue = "";
            const fr_acceptance = document.querySelector(".fr_acceptance");
            if (fr_acceptance && getComputedStyle(fr_acceptance).display === "none") {
                whatsAppUserConsentValue = "";
            } else if (webNearAccepTance) {
                whatsAppUserConsentValue = webNearAccepTance.checked ? "Yes" : "No";
                webNearAccepTance.addEventListener("change", function () {
                    if (this.checked) {
                        webNearInfo2.whatsAppUserConsent = "Yes";
                    } else {
                        webNearInfo2.whatsAppUserConsent = "No";
                    }
                });
            }
            webNearInfo2.whatsAppUserConsent = whatsAppUserConsentValue;
            webNearInfo2.utm_source = decodeURIComponent(
                params["utm_source"] || "Organic"
            );
            webNearInfo2.utm_medium = decodeURIComponent(params["utm_medium"] || "");
            webNearInfo2.utm_campaign = decodeURIComponent(
                params["utm_campaign"] || ""
            );
            webNearInfo2.utm_content = decodeURIComponent(
                params["utm_content"] || ""
            );
            webNearInfo2.utm_term = decodeURIComponent(params["utm_term"] || "");
            webNearInfo2.utm_adset = decodeURIComponent(params["utm_adset"] || "");
            webNearInfo2.gclid = decodeURIComponent(params["utm_term"] || "");
            webNearInfo2.salesforce_uuid = decodeURIComponent(
                params["salesforce_uuid"] || ""
            );
            webNearInfo2.msclkid = decodeURIComponent(params["msclkid"] || "");
            webNearInfo2.fbclid = fbclid;
            webNearInfo2.fbcId = fbc || null;
            webNearInfo2.fbpId = fbp || null;
            webNearInfo2.userAgent = userAgent;
            webNearInfo2.li_fat_id = decodeURIComponent(params["li_fat_id"] || "");

            webNearInfo2.user_id = visitor_id;
            webNearInfo2.user_timezone = v_timezone;
            //     webNearInfo2.l_page_url = "ik.com/home" + getCookie("ik-landingpage");
            if ((referrer || "") != "") {
                webNearInfo2.l_page_url =
                    "ik.com/home/" + (referrer || "").split("/").pop();
            } else {
                webNearInfo2.l_page_url = "ik.com/" + page_url.split("/").pop();
            }
            webNearInfo2.cta_page_url = "ik.com" + cta_lp;
            webNearInfo2.webinar_type = webinarType;
            webNearInfo2.eventname = eventName;
            webNearInfo2.wr__referrer = referrer;
            webNearInfo2.wr__device = getDeviceType();

            webNearInfo2.webinar_lead_type = webinarType;
            webNearInfo2.bye_calendly_type = "";
            webNearInfo2.is_exit_intent_popup = "No";
            webNearInfo2.irclickid = decodeURIComponent(params["irclickid"] || "");
        }
        function applyWeightedTopicDefault() {
            if (
                getThePopupFrom2.dataset.weightedTopicApplied === "true" ||
                !webNearTopicOfInterest ||
                webNearTopicOfInterest.length === 0
            ) {
                return;
            }

            const topicInputs = Array.from(webNearTopicOfInterest);
            const weightedOptions = buildWeightedTopicOptions(topicInputs);

            if (!weightedOptions.length) {
                return;
            }

            topicInputs.forEach((input) => {
                input.checked = false;
                input.removeAttribute("checked");
            });

            const { input: defaultInput } = pickWeightedTopicOption(weightedOptions);
            defaultInput.checked = true;
            defaultInput.setAttribute("checked", "checked");
            moveTopicOptionToTop(defaultInput);
            updateTopicSelectionMeta(defaultInput, { isDefault: true });

            getThePopupFrom2.dataset.weightedTopicApplied = "true";

            defaultInput.dispatchEvent(new Event("change", { bubbles: true }));

            webNearInfo2.webinar_type = webinarType;
            webNearInfo2.eventname = eventName;
            webNearInfo2.webinar_lead_type = webinarType;
        }

        function buildWeightedTopicOptions(topicInputs) {
            return TOPIC_WEIGHT_CONFIG.map((config) => {
                const matchingInput = topicInputs.find(
                    (input) => getTopicType(input) === config.type
                );
                return matchingInput ? { ...config, input: matchingInput } : null;
            }).filter(Boolean);
        }

        function pickWeightedTopicOption(options) {
            if (!options.length) {
                return {};
            }
            const totalWeight = options.reduce(
                (sum, option) => sum + option.weight,
                0
            );
            const selectionPoint = Math.floor(Math.random() * 100) + 1;
            const selectionPointPct = selectionPoint;
            console.log(
                "[Topic Default] Weighted selection",
                selectionPoint.toString().padStart(3, " "),
                "out of 100",
                `(${selectionPointPct.toFixed(2)}%)`
            );
            let cumulativeWeight = 0;

            for (const option of options) {
                const lowerBound = cumulativeWeight;
                cumulativeWeight += option.weight;
                const upperBoundPct = (cumulativeWeight / totalWeight) * 100;
                if (selectionPoint <= upperBoundPct) {
                    const lowerBoundPct = ((lowerBound / totalWeight) * 100).toFixed(2);
                    const formattedUpperBoundPct = upperBoundPct.toFixed(2);
                    console.log(
                        "[Topic Default] Selected option",
                        option.type,
                        `covers ${lowerBoundPct}% - ${formattedUpperBoundPct}%`
                    );
                    return option;
                }
            }

            const fallback = options[options.length - 1];
            console.log(
                "[Topic Default] Fallback option",
                fallback.type,
                "used (random value landed exactly on the upper boundary)"
            );
            return fallback;
        }

        function moveTopicOptionToTop(selectedInput) {
            const targetLabel = selectedInput?.closest("label");
            if (!targetLabel) {
                return;
            }

            const container = targetLabel.parentElement;
            if (!container) {
                return;
            }

            const referenceLabel = Array.from(container.children).find(
                (element) => element !== targetLabel && element.matches("label")
            );

            if (!referenceLabel) {
                container.appendChild(targetLabel);
                return;
            }

            container.insertBefore(targetLabel, referenceLabel);
        }

        function getTopicType(input) {
            return input?.getAttribute("webinarType") || input?.value || "";
        }

        function cleanTopicLabelText(text) {
            if (!text) {
                return "";
            }
            return text.replace(/\s+/g, " ").trim();
        }

        function extractTopicDetails(input) {
            if (!input) {
                return { value: "", label: "", type: "" };
            }
            const value = input.value || "";
            const type = getTopicType(input);
            const labelNode = input.closest("label");
            const rawLabel =
                labelNode?.innerText || labelNode?.textContent || input.value || "";
            const label = cleanTopicLabelText(rawLabel);
            return { value, label, type };
        }

        function updateTopicSelectionMeta(input, { isDefault = false } = {}) {
            const details = extractTopicDetails(input);
            if (!details.value && !details.label && !details.type) {
                return;
            }

            getThePopupFrom2.dataset.selectedTopicValue = details.value;
            getThePopupFrom2.dataset.selectedTopicLabel = details.label;
            getThePopupFrom2.dataset.selectedTopicType = details.type;

            if (isDefault || !getThePopupFrom2.dataset.defaultTopicValue) {
                getThePopupFrom2.dataset.defaultTopicValue = details.value;
                getThePopupFrom2.dataset.defaultTopicLabel = details.label;
                getThePopupFrom2.dataset.defaultTopicType = details.type;
            }
        }
        window.updateTopicSelectionMeta = updateTopicSelectionMeta;

        const MARKETING_DATASET_ENDPOINT =
            "https://nlhtyrnugl.execute-api.us-west-1.amazonaws.com/prod";

        function formatDateTime(dateTimeString) {
            if (!dateTimeString) {
                return "";
            }
            const date = new Date(dateTimeString);
            if (Number.isNaN(date.getTime())) {
                return "";
            }
            const year = date.getUTCFullYear();
            const month = (date.getUTCMonth() + 1).toString().padStart(2, "0");
            const day = date.getUTCDate().toString().padStart(2, "0");
            const hours = date.getUTCHours().toString().padStart(2, "0");
            const minutes = date.getUTCMinutes().toString().padStart(2, "0");
            const seconds = date.getUTCSeconds().toString().padStart(2, "0");
            return `${year}-${month}-${day} ${hours}:${minutes}:${seconds} UTC`;
        }

        function getLeadCreatedTimestamp() {
            return new Date()
                .toISOString()
                .replace(/T/, " ")
                .replace(/\.\d+Z$/, " UTC");
        }

        function getSelectedSlotInput() {
            return webNearSlots2?.querySelector('input[name="v2_slot"]:checked');
        }

        function buildLeadDatasetRecord(step, extraFields = {}) {
            const selectedSlot = getSelectedSlotInput();
            const formattedStartDateTime = formatDateTime(selectedSlot?.value);
            const formattedEndDateTime = formatDateTime(
                selectedSlot?.getAttribute("data-endtime")
            );

            const baseRecord = {
                Lead_Created_Time: getLeadCreatedTimestamp(),
                Lead_Name: `${webNearInfo2.firstName} ${webNearInfo2.lastName}`,
                Lead_First_Name: webNearInfo2.firstName,
                Lead_Last__Name: webNearInfo2.lastName,
                Lead_Email: webNearEmailAddress2.value,
                Lead_Time_Zone: webNearInfo2.user_timezone,
                Event_Type_Name: eventName,
                Event_Start_Date_Time: formattedStartDateTime,
                Event_End_Date_Time: formattedEndDateTime,
                Cancellation_reason: "",
                Mobile: webNearInfo2.fPhoneNumber,
                Phone_Code: webNearInfo2.phone_code,
                UTM_Campaign: webNearInfo2.utm_campaign,
                UTM_Source: webNearInfo2.utm_source,
                UTM_Medium: webNearInfo2.utm_medium,
                UTM_Term: webNearInfo2.utm_term,
                UTM_Content: webNearInfo2.utm_content,
                Tracking_ID: "",
                User_ID: webNearInfo2.user_id,
                Page_URL: encodeURIComponent(webNearInfo2.page_url),
                Country: v_country,
                Client_Timezone: webNearInfo2.user_timezone,
                CTA_Page: encodeURIComponent(webNearInfo2.cta_page_url),
                Landing_Page: encodeURIComponent(webNearInfo2.l_page_url),
                Webinar_reg_type: "",
                Webinar_Type: webNearInfo2.webinar_type,
                Switchup_Lead: webNearInfo2.webinar_lead_type,
                UUID: webNearInfo2.salesforce_uuid,
                Click_History: "",
                City: webNearInfo2.wr__city,
                Device:
                    typeof webNearInfo !== "undefined"
                        ? webNearInfo.wr__device
                        : webNearInfo2.wr__device,
                User_Agent: encodeURIComponent(navigator?.userAgent || ""),
                Refferer: encodeURIComponent(webNearInfo2.wr__referrer),
                Region: webNearInfo2.wr__region,
                whatsapp_user_consent: webNearInfo2.whatsAppUserConsent,
                step,
            };
            const stepProdData =
                typeof window.stepProdData === "object" && window.stepProdData !== null
                    ? window.stepProdData
                    : {};

            return {
                ...baseRecord,
                ...extraFields,
                ...stepProdData,
            };
        }

        function resolveAbBucketBase() {
            const bucketSource = window.ab_bucket_json;
            if (typeof bucketSource === "string") {
                try {
                    return JSON.parse(bucketSource);
                } catch (error) {
                    console.error("Error parsing ab_bucket_json string", error);
                    return {};
                }
            }

            if (
                typeof bucketSource === "object" &&
                bucketSource !== null &&
                !Array.isArray(bucketSource)
            ) {
                return { ...bucketSource };
            }

            return {};
        }

        function buildCareerMoveDetails() {
            const defaultOption = {
                value: getThePopupFrom2.dataset.defaultTopicValue || "",
                label: getThePopupFrom2.dataset.defaultTopicLabel || "",
                type: getThePopupFrom2.dataset.defaultTopicType || "",
            };

            const selectedDatasetOption = {
                value: getThePopupFrom2.dataset.selectedTopicValue || "",
                label: getThePopupFrom2.dataset.selectedTopicLabel || "",
                type: getThePopupFrom2.dataset.selectedTopicType || "",
            };

            const selectedInput = getThePopupFrom2.querySelector(
                '.topic_select[type="radio"]:checked'
            );
            const selectedDetails = extractTopicDetails(selectedInput);

            const resolvedSelected = {
                value: selectedDatasetOption.value || selectedDetails.value,
                label: selectedDatasetOption.label || selectedDetails.label,
                type: selectedDatasetOption.type || selectedDetails.type,
            };

            const resolvedDefault = {
                value: defaultOption.value || resolvedSelected.value,
                label: defaultOption.label || resolvedSelected.label,
                type: defaultOption.type || resolvedSelected.type,
            };

            return {
                career_move: {
                    default_option: resolvedDefault.label || "",
                    changed: resolvedSelected.label || "",
                },
            };
        }

        function buildAbBucketJsonString() {
            try {
                return JSON.stringify(buildCareerMoveDetails());
            } catch (error) {
                console.error("Error stringifying career move details", error);
                return JSON.stringify({});
            }
        }

        async function postMarketingDataset(data) {
            const options = {
                method: "POST",
                headers: {
                    "x-api-key": "fm0X61U99b80d5SlGjrxFaWjgxIBylhX3LkfYGPN",
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    dataset_id: "Marketing_data_new_logic",
                    table_id: "Leads_Click_history",
                    data,
                }),
                keepalive: true,
            };

            return fetch(MARKETING_DATASET_ENDPOINT, options);
        }

        async function sendStepThreeRequest2() {
            try {
                const record = buildLeadDatasetRecord("s3", {
                    ab_bucket_json: buildAbBucketJsonString(),
                });
                await postMarketingDataset([record]);
            } catch (error) {
                console.error("Error in sendStepThreeRequest2", error);
            }
        }

        setHiddenFields2();
        applyWeightedTopicDefault();

        async function pushToEndPoint2(endpoint) {
            let getCheckWebnear = webNearSlots2.querySelector(
                'input[name="v2_slot"]:checked'
            );
            webNearInfo2.eventStartTime = getCheckWebnear.value;

            // Validate slot time and log to Sentry if past (but continue execution)
            try {
                validateAndLogSlotTime(webNearInfo2.eventStartTime, {
                    function: 'pushToEndPoint2',
                    step: 2,
                    endpoint: endpoint
                });
            } catch (error) {
                console.error('Error in slot time validation:', error);
            }

            webNearInfo2.eventEndTime = getCheckWebnear.getAttribute("data-endtime");
            webNearInfo2.inviteStartTime = getCheckWebnear.getAttribute(
                "data-invitee_starttime"
            );
            webNearInfo2.inviteEndTime = getCheckWebnear.getAttribute(
                "data-invitee_endtime"
            );

            let formData = {
                "Topic of Interest": getThePopupFrom2.querySelector(
                    '.topic_select[type="radio"]:checked'
                ).value,
                "First Name": webNearInfo2.firstName,
                "Last Name": webNearInfo2.lastName,
                whatsAppUserConsent: webNearInfo2.whatsAppUserConsent,
                "Email Address": webNearEmailAddress2.value,
                ByeCalendlyType: webNearInfo2.bye_calendly_type,
                "webinar-type": webNearInfo2.webinar_type,
                "Webinar Lead Type": webNearInfo2.webinar_lead_type,
                utm_source: webNearInfo2.utm_source,
                utm_medium: webNearInfo2.utm_medium,
                utm_campaign: webNearInfo2.utm_campaign,
                utm_content: webNearInfo2.utm_content,
                utm_adset: webNearInfo2.utm_adset,
                utm_term: webNearInfo2.utm_term,

                City: webNearInfo2.wr__city,
                Device: webNearInfo2.wr__device,
                Referrer: webNearInfo2.wr__referrer,
                Region: webNearInfo2.wr__region,

                gclid: webNearInfo2.gclid,
                msclkid: webNearInfo2.msclkid,
                fbclid: webNearInfo2.fbclid,
                fbpId: webNearInfo2.fbpId,
                fbcId: webNearInfo2.fbcId,
                user_agent: webNearInfo2.userAgent,
                user_id: webNearInfo2.user_id,
                li_fat_id: webNearInfo2.li_fat_id,

                cta_page_url: webNearInfo2.cta_page_url,
                landing_page_url: webNearInfo2.l_page_url,
                event_name: eventName,
                user_timezone: webNearInfo2.user_timezone,
                page_url: webNearInfo2.page_url,
                site_url: webNearInfo2.site_url,
                v_country: v_country,
                salesforce_uuid: webNearInfo2.salesforce_uuid,
                phone_number_full: webNearInfo2.fPhoneNumber,
                phone_code: webNearInfo2.phone_code,
                is_exit_intent_popup: webNearInfo2.is_exit_intent_popup,
                irclickid: webNearInfo2.irclickid,

                "Event Start Time": webNearInfo2.eventStartTime,
                "Event End Time": webNearInfo2.eventEndTime,
                "Invitee Start Time": webNearInfo2.inviteStartTime,
                "Invitee End Time": webNearInfo2.inviteEndTime,
                ...(window.updateZapPayload || {}),
            };

            // Validate payload before sending
            if (!formData || Object.keys(formData).length === 0 || JSON.stringify(formData) === "{}") {
                throw new Error("Zapier webhook payload is empty");
            }

            let options = {
                method: "POST",
                mode: "no-cors",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(formData),
            };

            try {
                const sendData = await fetch(endpoint, options);
                return sendData;
            } catch (err) {
                console.error("P0: The Zapier Webhook Failed.", err);
            }
        }

        function hideError2() {
            getTopicErrMsg2.setAttribute("err_status", false);
            getFnErrMsg2.setAttribute("err_status", false);
            getEmErrMsg2.setAttribute("err_status", false);
            getPhErrMsg2.setAttribute("err_status", false);
        }

        // First Form Submittion
        function fromSend1stStep2() {
            function track(step, message) {
                typeof saveFormEventsActivity === "function"
                    ? saveFormEventsActivity(step, null, null, message)
                    : console.error("saveFormEventsActivity is not a function");
            }
            setHiddenFields2();

            let wTopicOfInterest =
                getThePopupFrom2.querySelector('.topic_select[type="radio"]:checked')
                    ?.value || "";
            let fullname = webNearFullName2.value.trim();
            let wEmail = webNearEmailAddress2.value;
            let fullPhoneNumber = webNearPhoneNumber2.value;

            //Hide errors
            webNearFullName2.addEventListener("input", hideError2);
            webNearEmailAddress2.addEventListener("input", hideError2);
            webNearPhoneNumber2.addEventListener("input", hideError2);
            webNearFullName2.addEventListener("focus", hideError2);
            webNearEmailAddress2.addEventListener("focus", hideError2);
            webNearPhoneNumber2.addEventListener("focus", hideError2);

            webNearTopicOfInterest.forEach((item) =>
                item.addEventListener("change", hideError2)
            );

            //Error check
            if (
                fullname.length == 0 &&
                wEmail.length == 0 &&
                fullPhoneNumber.length == 0 &&
                wTopicOfInterest.length == 0
            ) {
                getTopicErrMsg2.setAttribute("err_status", true);
                getFnErrMsg2.setAttribute("err_status", true);
                getEmErrMsg2.setAttribute("err_status", true);
                getPhErrMsg2.setAttribute("err_status", true);
                track("info-e", "validation-general");
                return;
            } else if (wTopicOfInterest.length == 0) {
                getTopicErrMsg2.setAttribute("err_status", true);
                track("info-e", "validation-topicOfInterest");
                return;
            } else if (!name_regex2.test(fullname) || fullname.length == 0) {
                getFnErrMsg2.setAttribute("err_status", true);
                track("info-e", "validation-name");
                return;
            } else if (!email_regex2.test(wEmail) || wEmail.length == 0) {
                getEmErrMsg2.setAttribute("err_status", true);
                track("info-e", "validation-email");
                return;
            } else if (
                !phone_regex2.test(fullPhoneNumber) ||
                fullPhoneNumber.length == 0
            ) {
                getPhErrMsg2.setAttribute("err_status", true);
                track("info-e", "validation-phone");
                return;
            } else {
                if (fullname.substring(0, fullname.indexOf(" ")) == "") {
                    webNearInfo2.firstName = fullname.substring(
                        fullname.indexOf(" ") + 1
                    );
                    webNearInfo2.lastName = fullname.substring(fullname.indexOf(" ") + 1);
                } else if (fullname.substring(fullname.indexOf(" ") + 1) == "") {
                    webNearInfo2.firstName = fullname.substring(0, fullname.indexOf(" "));
                    webNearInfo2.lastName = fullname.substring(0, fullname.indexOf(" "));
                } else {
                    webNearInfo2.firstName = fullname.substring(0, fullname.indexOf(" "));
                    webNearInfo2.lastName = fullname.substring(fullname.indexOf(" ") + 1);
                }

                try {
                    dataLayer.push({
                        event: "pa_new_webinar_registration_form_submitted",
                        webinar_name: eventName,
                    });
                } catch (err) {
                    console.error("Data Layer add failed", err);
                    track("info-e", "reporting-data-layer");
                }

                // webNearInfo2.fPhoneNumber = webNearPhoneNumberWri2.getNumber(intlTelInputUtils.numberFormat.E164);
                webNearInfo2.fPhoneNumber = "";
                if (typeof intlTelInputUtils == "undefined") {
                    try {
                        webNearInfo2.fPhoneNumber = `+${webNearPhoneNumberWri2.getSelectedCountryData().dialCode || ""
                            }${document.querySelector(".fr_phone_fl")?.value}`;
                    } catch (error) {
                        console.error("Error while getting phone number", error);
                        webNearInfo2.fPhoneNumber =
                            document.querySelector(".fr_phone_fl")?.value;
                    }
                } else {
                    webNearInfo2.fPhoneNumber = webNearPhoneNumberWri2.getNumber(
                        intlTelInputUtils.numberFormat.E164
                    );
                }
                // Get phone country code (dial code)
                try {
                    const countryData = webNearPhoneNumberWri2.getSelectedCountryData();
                    webNearInfo2.phone_code = countryData.dialCode ? `+${countryData.dialCode}` : "";
                } catch (error) {
                    console.error("Error getting phone country code:", error);
                    webNearInfo2.phone_code = "";
                }
                let zapUrl = "https://hooks.zapier.com/hooks/catch/11068981/34c9jjz/";

                pushToEndPoint2(zapUrl)
                    .then(() => {
                        sendStepThreeRequest2();
                        getThePopupFrom2.setAttribute("active_step", 2);
                        track("info");
                    })
                    .catch((error) => {
                        console.error("Error in pushToEndPoint2", error);
                        track("info-e", "flow-zapier");
                    });
            }
        }

        // Second Form Submition
        function fromSend2ndStep2() {
            function track(step, message) {
                typeof saveFormEventsActivity === "function"
                    ? saveFormEventsActivity(step, null, null, message)
                    : console.error("saveFormEventsActivity is not a function");
            }
            const getCheckWebnear = webNearSlots2.querySelector(
                'input[name="v2_slot"]:checked'
            );

            let utmm = visitor_id + ":" + v_country;
            let sf_uuid =
                v_timezone +
                ":ik.com/home" +
                cta_lp +
                ":ik.com/home" +
                getCookie("ik-landingpage");
            webNearInfo2.salesforce_uuid = sf_uuid;
            let utmstring = {
                assigned_to: "Interview Kickstart",
                invitee_first_name: webNearInfo2.firstName,
                invitee_last_name: webNearInfo2.lastName,
                invitee_email: webNearEmailAddress2.value,
                answer_1: webNearInfo2.fPhoneNumber,
                event_start_time: getCheckWebnear.value,
                event_end_time: getCheckWebnear.getAttribute("data-endtime"),
                utm_medium: utmm,
                salesforce_uuid: sf_uuid,
                whatsapp_consent: true,
            };

            bake_cookie("from_cookie", utmstring);
            let pushUrl = "https://hooks.zapier.com/hooks/catch/11068981/34cq9f8/";
            pushToEndPoint2(pushUrl)
                .then(() => {
                    getThePopupFrom2.setAttribute("active_step", 3);
                    track("slot");
                    secondStepSecondRequest2();
                })
                .catch((error) => {
                    console.error("Error in pushToEndPoint2 (slot)", error);
                    track("slot-e", "flow-zapier");
                });
        }

        const getWorkExperience = getThePopupFrom2.querySelector(".gql_exp_select");
        const getDomainRole = getThePopupFrom2.querySelector(".gql_domain_select");
        const getIsStudent = getThePopupFrom2.querySelector(
            ".v2-checkbox-is-student"
        );
        const getIsLaidOff = getThePopupFrom2.querySelector(
            ".v2-checkbox-is-laidoff"
        );

        const errWorkEx = getThePopupFrom2.querySelector(".v2_exp_fild");
        const errDomEx = getThePopupFrom2.querySelector(".v2_dom_fild");
        const errInEx = getThePopupFrom2.querySelector(".v2_int_fild");

        getWorkExperience.addEventListener("change", function () {
            errWorkEx.setAttribute("err_status", false);
        });

        getDomainRole.addEventListener("change", function () {
            errDomEx.setAttribute("err_status", false);
        });

        function fromSend3rdStep2() {
            function track(step, message) {
                typeof saveFormEventsActivity === "function"
                    ? saveFormEventsActivity(step, null, null, message)
                    : console.error("saveFormEventsActivity is not a function");
            }
            let v2WorkExp = getWorkExperience.value;
            let v2DomExp = getDomainRole.value;
            let v2IsStudent = getIsStudent.checked;
            let v2IsLaidOff = getIsLaidOff.checked;

            let gqlErrStatus = false;

            if (!v2WorkExp) {
                gqlErrStatus = true;
                errWorkEx.setAttribute("err_status", gqlErrStatus);
            }
            if (!v2DomExp) {
                gqlErrStatus = true;
                errDomEx.setAttribute("err_status", gqlErrStatus);
            }

            if (!gqlErrStatus) {
                let GQLformData = {
                    "First Name": webNearInfo2.firstName,
                    "Last Name": webNearInfo2.lastName,
                    "Email Address": webNearEmailAddress2.value,
                    utm_source: webNearInfo2.utm_source,
                    utm_medium: webNearInfo2.utm_medium,
                    utm_campaign: webNearInfo2.utm_campaign,
                    utm_term: webNearInfo2.utm_term,
                    gclid: webNearInfo2.gclid,
                    msclkid: webNearInfo2.msclkid,
                    fbclid: webNearInfo2.fbclid,
                    fbpId: webNearInfo2.fbpId,
                    fbcId: webNearInfo2.fbcId,
                    user_id: visitor_id,
                    user_timezone: v_timezone,
                    v_country: v_country,
                    phone_number_full: webNearInfo2.fPhoneNumber,
                    phone_code: webNearInfo2.phone_code,
                    "Event Start Time": webNearInfo2.eventStartTime,
                    "Event End Time": webNearInfo2.eventEndTime,
                    "Work Experience": v2WorkExp,
                    "Role Domain": v2DomExp,
                    // 'PA Consult Time': "",
                    // 'PA Consult Time Other': "",
                    "Interview Start Time": "",
                    "Laid Off": v2IsLaidOff,
                    "Is Student": v2IsStudent,
                    salesforce_uuid: webNearInfo2.salesforce_uuid,
                    page_url: webNearInfo2?.page_url || "",
                    ...(window.updateZapPayload || {}),
                };
                try {
                    dataLayer.push({
                        event: "wordpress_form_submitted",
                        formName: "Lead Qualifier Form",
                    });
                } catch (err) {
                    console.error("Error in data layer push", err);
                }
                let zapUrl = "https://hooks.zapier.com/hooks/catch/11068981/34cx4dp/";

                sendRequestZapiar(zapUrl, GQLformData, track);
            } else {
                track("gql-e", "validation-gql");
            }
        }

        async function sendRequestZapiar(url, data, callback = null) {
            // Validate payload before sending
            if (!data || (typeof data === 'object' && Object.keys(data).length === 0) || JSON.stringify(data) === "{}") {
                throw new Error("Zapier webhook payload is empty");
            }

            let options = {
                method: "POST",
                mode: "no-cors",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(data),
            };

            try {
                let response = await fetch(url, options);
                getThePopupFrom2.setAttribute("active_step", 4);
                loadPageFild();
                if (typeof callback === "function") {
                    callback("gql");
                }
            } catch (error) {
                if (typeof callback === "function") {
                    callback("gql-e", "Zapier Webhook Failed");
                }
                console.error("error in zapier webhook", error);
            }
        }

        async function secondStepSecondRequest2() {
            try {
                const record = buildLeadDatasetRecord("s4");
                const response = await postMarketingDataset([record]);
                return response;
            } catch (err) {
                console.error("Error in secondStepSecondRequest2", err);
            }
        }

        function loadPageFild() {
            const months = [
                "January",
                "February",
                "March",
                "April",
                "May",
                "June",
                "July",
                "August",
                "September",
                "October",
                "November",
                "December",
            ];

            const getCheckWebnear = webNearSlots2.querySelector(
                'input[name="v2_slot"]:checked'
            );
            const getFullData =
                webinarSlots[parseInt(getCheckWebnear.getAttribute("slot-index"))];

            function dateTh(date) {
                switch (parseInt(date)) {
                    case 1:
                        return date + "th";
                    case 2:
                        return date + "nd";
                    case 3:
                        return date + "rd";
                    default:
                        return date + "th";
                }
            }

            document.querySelector(".web_st_slot span").innerHTML = `${getFullData.weekday
                }, ${dateTh(getFullData.day)} ${months[parseInt(getFullData.month) - 1]
                }, ${getFullData.hour}:${getFullData.minute} ${getFullData.am_or_pm}`;
            document.querySelector(".cal_back_time span").innerHTML =
                getThePopupFrom2.querySelector(
                    '.v2_pref_fild input[type="checkbox"]:checked'
                )?.value || "Nothing selected";
        }

        const getV2Btn1 = getThePopupFrom2.querySelector(".step_btn_1");
        const getV2Btn2 = getThePopupFrom2.querySelector(".step_btn_2");
        const getV2Btn3 = getThePopupFrom2.querySelector(".step_btn_3");

        const getV2Back2 = getThePopupFrom2.querySelector(".step_back_2");
        const getV2Back3 = getThePopupFrom2.querySelector(".step_back_3");

        getV2Btn1.addEventListener("click", () => {
            try {
                fromSend1stStep2();
            } catch (error) {
                console.error("Error in 1st step", error);
                saveFormEventsActivity("info-e", null, null, "Error in 1st step");
            }
        });
        getV2Btn2.addEventListener("click", () => {
            try {
                fromSend2ndStep2();
            } catch (error) {
                console.error("Error in 2nd step", error);
                saveFormEventsActivity("slot-e", null, null, "Error in 2nd step");
            }
        });
        getV2Btn3.addEventListener("click", () => {
            try {
                fromSend3rdStep2();
            } catch (error) {
                console.error("Error in 3rd step", error);
                saveFormEventsActivity("slot-e", null, null, "Error in 3rd step");
            }
        });

        getV2Back2.addEventListener("click", function () {
            getThePopupFrom2.setAttribute("active_step", 1);
        });
        getV2Back3.addEventListener("click", function () {
            getThePopupFrom2.setAttribute("active_step", 2);
        });
    });
</script>

<script>
    function reliventSlotLoad() {
        const allSlots = {};
        return async function (currentWebinarType) {
            webinarType = currentWebinarType;
            if (allSlots[currentWebinarType]) {
                webinarSlots = allSlots[currentWebinarType];
                return webinarSlots;
            }
            let v_country_code = v_country !== "India" ? "USA" : "IND";
            let api_url = `https://uplevel.interviewkickstart.com/api/webinar-slot/upcoming-slots/?country=${v_country_code}&program=Backend&timezone=${v_timezone?.replace(
                "+",
                "%2B"
            )}&type=${currentWebinarType}`;
            const option = {
                method: "GET",
                headers: {
                    Authorization: "1Cgx6oYXkOlWkNDn7_tXO",
                },
            };
            const response = await fetch(api_url, option);
            const data = await response.json();
            const resobj = data.map((item) => ({
                ...item,
                webinar_lead_type: webinarType,
            }));
            allSlots[currentWebinarType] = resobj;
            webinarSlots = resobj;
            return webinarSlots;
        };
    }

    let reliventSlotLoadFunc = reliventSlotLoad();

    let defafultWebinarType = webinarType;
    let defafultEventName = eventName;

    function slot_change_fun() {
        if (!this.checked) return;
        if (typeof window.updateTopicSelectionMeta === "function") {
            window.updateTopicSelectionMeta(this);
        }
        if (v_country === "India")
            eventName = "Build AI/ML Skills & Interview Readiness to Become a Top 1% Tech Pro";
        if (this.value && v_country !== "India") {
            webinarType = this.getAttribute("webinarType") || defafultWebinarType;
            document.body.setAttribute("webinarType", webinarType);
            switch (webinarType) {
                case "SWITCH_UP":
                    eventName = "Uplevel Your Career with AI/ML/Gen AI";
                    break;
                case "Agentic_AI":
                    eventName = "Uplevel your career with Agentic AI";
                    break;
                default:
                    eventName = "How to nail your next technical interview";
                    break;
            }
            reliventSlotLoadFunc(webinarType).then((x) => {
                document.dispatchEvent(webNearLoadedEv);
            });
        }
    }
    document
        .querySelectorAll('.v2_from_wrapper .topic_select[type="radio"]')
        .forEach((item) => item.addEventListener("change", slot_change_fun));
</script>